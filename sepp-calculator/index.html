<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>72(t) Adventure Tool</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>72(t) SEPP Adventure Engine</h1>
            <p>Compare retirement paths and forecast your global journey.</p>
        </header>

        <div class="card intro-card">
            <h2>About the 72(t) Rule</h2>
            <p>The <strong>IRS 72(t) rule</strong> allows you to take penalty-free early withdrawals from your IRA or 401(k) by establishing <strong>Substantially Equal Periodic Payments (SEPP)</strong>. You avoid the 10% penalty, but payments must continue for five years or until you reach age 59½, whichever is longer.</p>
            <p><a href="https://www.irs.gov/retirement-plans/substantially-equal-periodic-payments" target="_blank" class="irs-link">Official IRS SEPP Guidance →</a></p>
        </div>

        <div class="dashboard">
            <aside class="sidebar">
                <section class="card">
                    <form id="calc-form">
                        <h2>Core Financials</h2>
                        <div class="input-group">
                            <label for="balance">401(k) Balance ($) <span class="req">*</span></label>
                            <input type="number" id="balance" min="0" required placeholder="e.g. 1000000">
                        </div>
                        <div class="input-group">
                            <label for="age">Current Age <span class="req">*</span></label>
                            <input type="number" id="age" min="0" required placeholder="e.g. 40">
                        </div>
                        <div class="input-group">
                            <label for="status">Residency Status <span class="req">*</span></label>
                            <select id="status" required>
                                <option value="" disabled selected>Select status</option>
                                <option value="citizen">US Citizen / Resident</option>
                                <option value="nra">Non-Resident Alien (NRA)</option>
                            </select>
                        </div>
                        <div class="input-group" id="state-name-group">
                            <label for="state-name">Home State</label>
                            <input type="text" id="state-name" placeholder="e.g. California">
                        </div>
                        <div class="input-group" id="state-tax-group">
                            <label for="state-tax">State Tax Rate (%)</label>
                            <input type="number" id="state-tax" min="0" step="0.1" placeholder="0">
                        </div>
                        <div class="input-group">
                            <label for="country">Destination <span class="req">*</span></label>
                            <select id="country" required>
                                <option value="" disabled selected>Select country</option>
                                <option value="India">India</option>
                                <option value="Singapore">Singapore</option>
                                <option value="Dubai">Dubai</option>
                                <option value="UK">United Kingdom</option>
                            </select>
                        </div>

                        <h2 style="font-size: 1rem; margin-top: 20px;">Assumptions</h2>
                        <div class="input-grid">
                            <div class="input-group">
                                <label>Growth % <span class="req">*</span></label>
                                <input type="number" id="growth-rate" min="0" required placeholder="7">
                            </div>
                            <div class="input-group">
                                <label>Currency <span class="req">*</span></label>
                                <input type="text" id="currency-symbol" required placeholder="₹">
                            </div>
                            <div class="input-group">
                                <label>Exchange rate <span class="req">*</span></label>
                                <input type="number" id="base-exchange" min="0" required placeholder="84.00">
                            </div>
                            <div class="input-group">
                                <label>Devaluation rate % <span class="req">*</span></label>
                                <input type="number" id="devaluation-rate" min="0" required placeholder="2">
                            </div>
                        </div>
                        <button type="submit" class="btn-calculate">Update Everything</button>
                    </form>
                </section>
            </aside>

            <section class="main-content" id="results-area" style="display: none;">
                <div class="results-grid">
                    <div class="card result-card highlight">
                        <h3>Annual SEPP Payment</h3>
                        <p id="sepp-amount" class="hero-value">$0</p>
                        <span class="sub-label">Amortization (5% Floor)</span>
                    </div>
                    
                    <div class="card summary-card">
                        <h3>SEPP Summary (to Age 59.5)</h3>
                        <div class="stat"><span>Total Withdrawn:</span> <span id="total-sepp-withdrawn" class="stat-value">$0</span></div>
                        <div class="stat"><span>Total Taxes Paid:</span> <span id="total-sepp-taxes" class="stat-value text-danger">$0</span></div>
                        <div class="stat"><span>Net Withdrawn:</span> <span id="net-sepp-withdrawn" class="stat-value text-success">$0</span></div>
                        <div class="stat"><span>Ending Balance:</span> <span id="final-sepp-balance" class="stat-value text-success">$0</span></div>
                    </div>

                    <div class="card summary-card danger-border">
                        <h3>Lump Sum (Immediate)</h3>
                        <div class="stat"><span>10% Penalty:</span> <span id="lump-sum-penalty" class="stat-value text-danger">$0</span></div>
                        <div class="stat"><span>Taxes (<span id="tax-percent-display">0</span>%):</span> <span id="lump-sum-taxes" class="stat-value text-danger">$0</span></div>
                        <div class="stat"><span>Final Net:</span> <span id="lump-sum-final-net" class="stat-value">$0</span></div>
                    </div>
                </div>

                <div class="card chart-card">
                    <h2>Wealth Comparison: Spendable Cash</h2>
                    <div class="comparison-container">
                        <div class="bar-group">
                            <div class="bar-label">Lump Sum Net</div>
                            <div class="bar-wrapper"><div id="bar-lump" class="bar danger-bg" style="width: 0%"></div><span id="bar-lump-val" class="bar-value">$0</span></div>
                        </div>
                        <div class="bar-group">
                            <div class="bar-label">SEPP Net Withdrawn</div>
                            <div class="bar-wrapper"><div id="bar-sepp" class="bar success-bg" style="width: 0%"></div><span id="bar-sepp-val" class="bar-value">$0</span></div>
                        </div>
                    </div>
                </div>

                <div class="card table-card">
                    <h2>The Journey: Year-by-Year Forecast</h2>
                    <div class="table-container">
                        <table id="adventure-table">
                            <thead>
                                <tr>
                                    <th>Year</th><th>Age</th><th>Status</th><th>Start Balance</th><th>Growth</th>
                                    <th>SEPP ($)</th><th>Tax %</th><th>Tax ($)</th><th>End Balance</th><th>Net (Mo)</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>